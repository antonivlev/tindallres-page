<!DOCTYPE html>
<html>
	<head>
		<script src="https://d3js.org/d3.v4.min.js"></script>
		<script src="http://underscorejs.org/underscore-min.js"></script>
		<link href="https://fonts.googleapis.com/css?family=Droid+Sans+Mono" rel="stylesheet">

		<style>
			svg {
				display: block;
				margin: auto;
			}		
		</style>

		<style type="text/css">
			.st0{fill:none;stroke:#CCCCCC;stroke-width:7;stroke-linecap:round;stroke-miterlimit:10;}
			.st1{fill:none;stroke:#CCCCCC;stroke-width:3;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}
			.st2{fill:none;stroke:#CCCCCC;stroke-width:4;stroke-linecap:round;stroke-miterlimit:10;}
			.st3{fill:none;stroke:#6792E0;stroke-width:3;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}
			.st4{fill:#032A6F;}
			.st5{fill:#FF6500;}
			.st6{fill:#CCCCCC;}
			.st7{font-family:'Droid Sans Mono';}
			.st8{font-size:20px;}
			.st9{font-size:47.6976px;}
			.st10{display:none;}
		</style>	
	</head>
	
<!-- <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="962px" height="793px" viewBox="155 39 962 793">
 -->

	<body>
		<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1343.1px" height="1147px" viewBox="192 -300 1343.1 1000">
			<g id="Roads">
				<polyline id="m25" class="st0" points="1305.7,192.4 1243.6,193 1171.6,247.1 1171.6,391.1 1243.6,463.1 1314.4,464.3 	"/>
				<line id="a34" class="st1" x1="493.6" y1="-85.9" x2="493.6" y2="533.1"/>
				<line id="m4" class="st2" x1="1172.1" y1="337.1" x2="389.1" y2="337.1"/>
				<polyline id="m40" class="st1" points="1203.1,223.6 790,222.1 493.7,-74.3 	"/>
				<line id="m3_1_" class="st1" x1="1197.4" y1="421.4" x2="688.8" y2="611.1"/>
			</g>
			<g id="River">
				<path id="river_2_" class="st3" d="M528.8,60.9l29,28.8v26.7L544.3,130h-24.5l-10,9.8v31.1l-0.5,13.5l17.2,0.6l9-9h11.3v8.4
					l9.7,9.6h17.3v14h15.7l13.6-13.5l12.3,12.3l-23.5,23.7v19.3l11,11.1l9.7-9.8h17.7l9,9l-20.5,20.5v23.3l17,17v26.8l15.1,15.1
					l14.5-14.6l-0.3-11.1l17.3-18H746l18.2,18h25.7v-8.6c0,0,17-18.1,18-18.1c2,0,0-19.4,0-19.4h13.6l13.5,13l9.2-9.3l8.8,0.1
					l-0.3,14.4l10.9,10.8l31.9-32h16.4v-10.8L932,257h24.4l13.5,14.2v23.7l13.7,13.5l-11.3,11.4l11.4,11.3l37.7,33.6l117.3-0.2
					l16.3-14.4h25.8h23l34.5-34.3"/>
			</g>
			<g id="Circles">
				<circle id="oxford" class="st4" cx="528.8" cy="60.9" r="18"/>
				<circle id="marlow" class="st4" cx="943" cy="258.1" r="9"/>
				<circle id="maidenhead" class="st4" cx="980" cy="328.1" r="9"/>
				<circle id="bracknell" class="st4" cx="1009.6" cy="466.6" r="9"/>
				<circle id="wokingham" class="st4" cx="905" cy="442.3" r="9"/>
				<circle id="basingstoke" class="st4" cx="713.7" cy="557.5" r="9"/>
				<circle id="reading" class="st4" cx="764.2" cy="337.1" r="9"/>
				<circle id="henley" class="st5" cx="808.1" cy="291" r="9"/>
				<circle id="abingdon" class="st4" cx="512.2" cy="140.4" r="9"/>
				<circle id="didcot" class="st4" cx="521.2" cy="273.2" r="9"/>
				<circle id="newbury" class="st4" cx="477.7" cy="412.4" r="9"/>
				<circle id="bicester" class="st4" cx="493.6" cy="-74.3" r="9"/>
				<circle id="slough" class="st4" cx="1096" cy="364.2" r="18"/>
				<circle id="london" class="st4" cx="1238.1" cy="305.6" r="36"/>
				<circle id="hwycombe" class="st4" cx="940.6" cy="183.8" r="9"/>
			</g>
			<g id="Text">
				<g id="roads">
					<text id="XMLID_55_" transform="matrix(1 0 0 1 374.1199 328.0777)" class="st6 st7 st8">M4</text>
					<text id="XMLID_43_" transform="matrix(1 0 0 1 1275.4199 499.0782)" class="st6 st7 st8">M25</text>
					<text id="XMLID_40_" transform="matrix(1 0 0 1 688.8207 634.8105)" class="st6 st7 st8">M3</text>
					<text id="XMLID_38_" transform="matrix(1 0 0 1 1030.2169 213.078)" class="st6 st7 st8">M40</text>
					<text id="XMLID_36_" transform="matrix(1 0 0 1 1258.5383 167.9777)" class="st6 st7 st8">M25</text>
					<text id="XMLID_34_" transform="matrix(1 0 0 1 448.4118 3.855)" class="st6 st7 st8">A34</text>
					<text id="XMLID_33_" transform="matrix(1 0 0 1 477.7047 557.5177)" class="st6 st7 st8">A34</text>
				</g>
				<g id="towns">
					<text id="XMLID_78_" transform="matrix(1 0 0 1 503.2203 35.1349)" class="st4 st7 st8">Oxford</text>
					<text id="XMLID_2_" transform="matrix(1 0 0 1 503.2202 257.8869)" class="st4 st7 st8">Didcot</text>
					<text id="XMLID_5_" transform="matrix(1 0 0 1 389.0998 140.3645)" class="st4 st7 st8">Abingdon</text>
					<text transform="matrix(0.9328 0 0 1 682.4561 257.8871)" class="st5 st7 st8">Henley-on-Thames</text>
					<text transform="matrix(0.9328 0 0 1 755.2148 281.8871)" class="st5 st7 st8">HQ!</text>
					<text id="XMLID_76_" transform="matrix(1 0 0 1 1207.5725 264.1547)" class="st4 st7 st8">London</text>
					<text id="XMLID_75_" transform="matrix(1 0 0 1 871.0198 167.9779)" class="st4 st7 st8">High Wycombe</text>
					<text id="XMLID_28_" transform="matrix(1 0 0 1 509.2068 -74.2539)" class="st4 st7 st8">Bicester</text>
					<text id="XMLID_74_" transform="matrix(1 0 0 1 853.0199 427.206)" class="st4 st7 st8">Wokingham</text>
					<text id="XMLID_4_" transform="matrix(1 0 0 1 651.8676 538.5719)" class="st4 st7 st8">Basingstoke</text>
					<text id="XMLID_73_" transform="matrix(1 0 0 1 959.4059 453.0295)" class="st4 st7 st8">Bracknell</text>
					<text id="XMLID_72_" transform="matrix(1 0 0 1 773.215 364.1995)" class="st4 st7 st8">Reading</text>
					<text id="XMLID_71_" transform="matrix(1 0 0 1 383.8032 400.2058)" class="st4 st7 st8">Newbury</text>
					<text id="XMLID_70_" transform="matrix(1 0 0 1 1057.5247 403.3782)" class="st4 st7 st8">Slough</text>
					<text id="XMLID_6_" transform="matrix(1 0 0 1 952.02 249.078)" class="st4 st7 st8">Marlow</text>
					<text id="XMLID_8_" transform="matrix(1 0 0 1 992.2844 328.0771)" class="st4 st7 st8">Maidenhead</text>
				</g>
				
				<g id="top-text">
					<text id="front-text1" transform="matrix(1.0237 0 0 1 370.0547 -136.2306)" text-anchor="start" fill="#032A6F" font-family="Droid Sans Mono" font-size="50px" style="opacity: 0">Tindall Resourcing Ltd</text>
					<text id="front-text2" transform="matrix(1.0237 0 0 1 370.0547 -136.2306)" text-anchor="start" fill="#032A6F" font-family="Droid Sans Mono" font-size="30px" style="opacity: 0">Experts in IT and Software Development recruitment</text>
					<text id="front-text3" transform="matrix(1.0237 0 0 1 370.0547 -136.2306)" text-anchor="start" fill="#032A6F" font-family="Droid Sans Mono" font-size="30px" style="opacity: 0">Oxfordshire, Berkshire, Thames Valley and London</text>
				</g>
			</g>

			<g id="images">	
				<image style="overflow:visible;" width="353" height="122" xlink:href="tinres.jpg"  transform="matrix(0.9484 0 0 -0.9491 1004.6994 -201.8988)">
				</image>		
				<image style="overflow:visible;" width="168" height="31" xlink:href="itspeople.jpg"  transform="matrix(1.078 0 0 -1.0684 370.0547 -201.8988)">
				</image>
			</g>
		</svg>

		
		<script>
			var c = d3.selectAll("circle:not(#henley)");

			var text1 = "Tindall Resourcing Ltd";
			var text2 = "Experts in IT and Software Development recruitment";
			var text3 = "Oxfordshire, Berkshire, Thames Valley and London";
			var stay_dur = 1500;
			var trans_dur = 700;

			var delays = _.range(c.nodes().length).map( () => Math.random()*1000 );
			c.data(delays);
			//console.log(delays)
				
			function start_1() {
				d3.select("#top-text").select("#front-text1")
					.transition()
						.duration(trans_dur)
						.style("opacity", 1)
					.transition()
					 	.duration(stay_dur)
					.transition()
					 	.duration(trans_dur)
					 	.style("opacity", 0)
					 	.on("end", start_2);																
			}

			function start_2() {
				d3.select("#top-text").select("#front-text2")
					.transition()
						.duration(trans_dur)
						.style("opacity", 1)
					.transition()
					 	.duration(stay_dur)
					.transition()
					 	.duration(trans_dur)
					 	.style("opacity", 0)
					 	.on("end", start_3);																
			}

			function start_3() {
				d3.select("#top-text").select("#front-text3")
					.transition()
						.duration(trans_dur)
						.style("opacity", 1)
					.transition()
					 	.duration(stay_dur)
					.transition()
					 	.duration(trans_dur)
					 	.style("opacity", 0)
					 	.on("end", start_1);																
			}


			function repeat_flicker() {
				c.transition()
					.delay(function(d, i) {	
						console.log(d);
						return d 
					})
					.duration(2000)
					.style("fill", "#032A6F")		
				.transition()
					.duration(2000)
					.style("fill", "#6A7EC7")
				// .on("end", repeat_flicker);					
			}

			function repeat_henley() {
				d3.select("#henley")
					.transition()
						.duration(500)
						.style("fill", "#FF6500")		
					.transition()
						.duration(500)
						.style("fill", "#E6E6E6")
					.on("end", repeat_henley);	
			}

			repeat_henley();
			repeat_flicker();
			start_1();
		</script>
	</body>
</html>